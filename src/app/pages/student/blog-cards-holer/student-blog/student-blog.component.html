<div class="dashboard-container">
  <app-student-header 
    [userName]="studentData?.name || ''" 
    [lastLoginRaw]="lastLoginFromSession"
    [showWelcome]="false"
    [isMeetingsMode]="false"
    [fixedPosition]="true"
    [topPosition]="'0'">
  </app-student-header>

  <!-- Main page title -->
  <h1 class="main-title">Blogs</h1>
  
  <div class="container">
    <!-- New Blog button positioned absolute -->
    <button mat-raised-button color="primary" class="new-blog-btn" (click)="openAddDialog()">
      + New Blog
    </button>

    <div class="header-row">
      <div class="header">
        <h2>{{ filter === "new" ? "New Blogs" : "Old Blogs" }}</h2>
      </div>
      
      <div class="filter">
        <label for="filter">Filter Blogs:</label>
        <select id="filter" (change)="onFilterChange($event)">
          <option value="new">New (Last 30 Days)</option>
          <option value="old">Old (Older than 30 Days)</option>
        </select>
      </div>
    </div>

    <!-- Blog search component -->
    <app-blog-search 
      [initialQuery]="searchQuery"
      (searchQuery)="handleSearch($event)"
      (clearSearch)="handleClearSearch()">
    </app-blog-search>

    <!-- Loading indicator -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <p>Loading blogs...</p>
    </div>

    <!-- Blog cards list -->
    <div *ngIf="!isLoading" class="blog-list">
      <div *ngIf="filteredBlogs.length === 0 && !isLoading && searchQuery" class="no-results">
        <mat-icon>search_off</mat-icon>
        <p>No blogs found matching "{{ searchQuery }}"</p>
        <button mat-button color="primary" (click)="handleClearSearch()">Clear search</button>
      </div>
      
      <div *ngIf="filteredBlogs.length === 0 && !searchQuery" class="no-blogs-message">
        No {{ filter === "new" ? "new" : "old" }} blogs to display.
      </div>
      
      <app-blog-card
        *ngFor="let blog of filteredBlogs"
        [blog]="blog"
        [isOldBlog]="filter === 'old'"
        (addCommentEvent)="onAddComment($event.blogId, $event.content)"
        (blogUpdated)="onBlogUpdated()"
        (blogDeleted)="onBlogDeleted($event)">
      </app-blog-card>
    </div>
  </div>
</div>